# Tower Repository Configuration

# Default settings applied to all repositories
defaults:
  visibility: public
  has_issues: true
  has_wiki: true
  has_projects: false
  delete_branch_on_merge: true
  allow_merge_commit: false
  allow_squash_merge: true
  allow_rebase_merge: false
  topics:
    - managed-by-tower

  # Default ruleset for all repos: no direct push to main, require PR with review
  ruleset:
    name: default-branch-protection
    target: branch
    enforcement: active
    branch_pattern: "~DEFAULT_BRANCH"
    bypass_admins: true
    block_force_pushes: true
    block_deletions: true
    require_linear_history: false
    require_signed_commits: false
    pull_request:
      required_approving_review_count: 1
      dismiss_stale_reviews_on_push: false
      require_code_owner_review: false
      require_last_push_approval: false
      required_review_thread_resolution: true
    # required_status_checks: []  # Configure per-repo as needed

# Repository-specific configurations (override defaults as needed)
repositories:
  - name: wzhliang/tt-01
    description: Test repository for Tower

  - name: wzhliang/tt-02
    visibility: private
